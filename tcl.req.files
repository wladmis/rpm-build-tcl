#!/bin/sh -efu

while IFS=$'\t' read -r f t; do
	# tcl modules
	case "$f" in
		*.tcl)
			case "$t" in
				*"symbolic link to"*) ;;
				*" text"*) echo "$f" ;;
				*) echo "${0##*/}: $f: $t" >&2 ;;
			esac
			continue ;;
	esac
	# scripts
	case "$t" in
		# handles both "#!/usr/bin/tclsh" and "#!/usr/bin/env tclsh"
		*[\ /]"tclsh script text executable"*) ;;
		*[\ /]"wish script text executable"*) ;;
		*) continue ;;
	esac
	echo "$f"
done
